@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewBag.Title = "Ppychologist Info";
    Layout = "~/Views/Shared/Customer_Layout.cshtml";
}
@using ZAlpha.Application.Common.Models;
@using ZAlpha.Application.CustomerAccount.Queries.GetAllCustomerAccount;
@model CustomerAccountModel

<head>
    <title>Customer Profile</title>
    <style>
        .DescriptionPpychologistBox {
            border-radius: 7px;
            background-color: whitesmoke;
            box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;
            padding: 1vw 2vw 1vw 2vw;
            margin-top: 2rem;
            flex-wrap: wrap;
            font-size: 0.9rem;
        }

        .input {
            border: 2px solid transparent;
            width: 21vw;
            height: 2.5em;
            padding-left: 0.8em;
            outline: none;
            overflow: hidden;
            background-color: #F3F3F3;
            border-radius: 10px;
            transition: all 0.5s;
        }

            .input:hover,
            .input:focus {
                border: 2px solid #4A9DEC;
                box-shadow: 0px 0px 0px 7px rgb(74, 157, 236, 20%);
                background-color: white;
            }

        .buttonDangPost {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1rem 1.5rem;
            gap: 8px;
            height: 3rem;
            width: 10rem;
            border: none;
            background: #28c0f7;
            border-radius: 15px;
            cursor: pointer;
        }

        .lable {
            line-height: 22px;
            font-size: 17px;
            color: #fff;
            font-family: sans-serif;
            letter-spacing: 1px;
        }

        .buttonDangPost:hover {
            background: #007bff;
        }

        .buttonDangPost:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.2);
        }
    </style>
</head>

<div class="boxProfile">
    <div class="row" style="margin:1rem 0 ;">
        <div class="col-3">
            <img style="width: 10vw; display:block;  margin:0 auto; max-height: 15vw; border-radius: 10px" src="@(Model.UserAccount.AvatarUrl == null ? "https://img.cand.com.vn/resize/800x800/NewFiles/Images/2023/06/01/313437324_530297825770289_851393-1685621442627.jpg": Model.UserAccount.AvatarUrl)" />
        </div>
        <div class="col-9">
            <div style="color: black; font-size: 16px; font-family: Inter; font-weight: 600; word-wrap: break-word; padding: 0.1rem 0;">@Model.UserAccount.FirstName @Model.UserAccount.LastName</div>
            <div style="color: #2D76CB; font-size: 14px; font-family: Inter; font-weight: 500; word-wrap: break-word">(Freemium)</div>
        </div>        
    </div>
    <div class="row" style="margin:1rem 0 ;">
        <div class="col-6">
            <div style="color: #080EA8; font-size: 13px; font-family: Inter; font-weight: 700; word-wrap: break-word; margin: 0.2rem;">Họ</div>
            <input class="input" placeholder="text" value="@Model.UserAccount.FirstName" readonly>
        </div>
        <div class="col-6">
            <div style="color: #080EA8; font-size: 13px; font-family: Inter; font-weight: 700; word-wrap: break-word; margin: 0.2rem;">Tên</div>
            <input class="input" placeholder="text" value="@Model.UserAccount.LastName" readonly>
        </div>
    </div>
    <div class="row" style="margin:1rem 0 ;">
        <div class="col-6">
            <div style="color: #080EA8; font-size: 13px; font-family: Inter; font-weight: 700; word-wrap: break-word; margin: 0.2rem;">Tài khoản đăng nhập</div>
            <input class="input" placeholder="text" value="@Model.UserAccount.UserName" readonly>
        </div>
        <div class="col-6">
            <div style="color: #080EA8; font-size: 13px; font-family: Inter; font-weight: 700; word-wrap: break-word; margin: 0.2rem;">Ngày sinh</div>
            <input class="input" placeholder="text" value="@Model.UserAccount.BirthDay" readonly>
        </div>
    </div>
    <div class="row" style="margin:1rem 0 ;">
        <div class="col-6">
            <div style="color: #080EA8; font-size: 13px; font-family: Inter; font-weight: 700; word-wrap: break-word; margin: 0.2rem;">Email</div>
            <input class="input" placeholder="text" value="@Model.UserAccount.Email" readonly>
        </div>
        <div class="col-6">
            <div style="color: #080EA8; font-size: 13px; font-family: Inter; font-weight: 700; word-wrap: break-word; margin: 0.2rem;">Số điện thoại</div>
            <input class="input" placeholder="text" value="@Model.UserAccount.Phone" readonly>
        </div>
    </div>
    <div class="row" style="margin:1rem 0 ;">
        <div class="col-6">
            <div style="color: #080EA8; font-size: 13px; font-family: Inter; font-weight: 700; word-wrap: break-word; margin: 0.2rem;">Địa chỉ</div>
            <input class="input" placeholder="text" value="@Model.UserAccount.Address" readonly>
        </div>
        <div class="col-6">
            <div style="color: #080EA8; font-size: 13px; font-family: Inter; font-weight: 700; word-wrap: break-word; margin: 0.2rem;">Số dư </div>
            <input class="input" placeholder="text" value="@Model.UserAccount.Wallet" readonly>
        </div>
    </div>
    <div class="row" style="margin:2rem 0;">
        <div class="col-3">
        </div>
       
        <div class="col-6" style="display:flex;justify-content: center;">
            <button class="buttonDangPost" data-bs-toggle="modal" data-bs-target="#exampleModal">
                <i class="fa-solid fa-pen-to-square" style="color:white;"></i>
                <span class="lable">Chỉnh sửa</span>
            </button>
            <style>
                .modal{
                    --bs-modal-width: 1000px;
                }
            </style>
            <!-- Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">

                       
                            <div class="modal-header">
                                <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="row" style="margin:1rem 0 ;">
                                    <div class="col-6">
                                        <div style="color: #080EA8; font-size: 13px; font-family: Inter; font-weight: 700; word-wrap: break-word; margin: 0.2rem;">Họ</div>
                                    <input class="input" placeholder="text" name="FirstName" value="@Model.UserAccount.FirstName">
                                    </div>
                                    <div class="col-6">
                                        <div style="color: #080EA8; font-size: 13px; font-family: Inter; font-weight: 700; word-wrap: break-word; margin: 0.2rem;">Tên</div>
                                    <input class="input" placeholder="text" name="LastName" value="@Model.UserAccount.LastName">
                                    </div>
                                </div>
                                <div class="row" style="margin:1rem 0 ;">
                                    <div class="col-6">
                                        <div style="color: #080EA8; font-size: 13px; font-family: Inter; font-weight: 700; word-wrap: break-word; margin: 0.2rem;">Email</div>
                                    <input class="input" placeholder="text" name="Email" value="@Model.UserAccount.Email">
                                    </div>
                                    <div class="col-6">
                                        <div style="color: #080EA8; font-size: 13px; font-family: Inter; font-weight: 700; word-wrap: break-word; margin: 0.2rem;">Ngày sinh</div>
                                    <input class="input" placeholder="text" name="BirthDay" value="@Model.UserAccount.BirthDay" type="date">
                                    </div>
                                    @*Éo show mặc định dc*@
                                    <script>
                                        document.getElementsByName('BirthDay')[0].value = "@Model.UserAccount.BirthDay";
                                    </script>
                                </div>
                                <div class="row" style="margin:1rem 0 ;">
                                    <div class="col-6">
                                        <div style="color: #080EA8; font-size: 13px; font-family: Inter; font-weight: 700; word-wrap: break-word; margin: 0.2rem;">Số điện thoại</div>
                                    <input class="input" placeholder="text" name="Phone" value="@Model.UserAccount.Phone">
                                    </div>
                                    <div class="col-6">
                                        <div style="color: #080EA8; font-size: 13px; font-family: Inter; font-weight: 700; word-wrap: break-word; margin: 0.2rem;">Địa chỉ</div>
                                    <input class="input" placeholder="text" name="Address" value="@Model.UserAccount.Address">
                                    </div>
                                </div>

                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                            <button role="button" class="btn btn-primary" type="submit" onclick="EditInfo()">Lưu</button>
                            </div>

                      

                    </div>
                </div>
            </div>

        </div>
        <div class="col-3">
        </div>

    </div>
    


    <script>
      
    
  
        function EditInfo() {
            var FirstName = document.getElementsByName('FirstName')[0].value
            var LastName = document.getElementsByName('LastName')[0].value
            var Email = document.getElementsByName('Email')[0].value
            var BirthDay = document.getElementsByName('BirthDay')[0].value
            var Phone = document.getElementsByName('Phone')[0].value
            var Address = document.getElementsByName('Address')[0].value
            $.ajax({
                type: "Get",
                url: "@Url.Action("EditInfo", "Customer")",
                data: { FirstName: FirstName,LastName: LastName,Email:Email,BirthDay:BirthDay ,Phone:Phone,Address:Address },
                success: function (result) {
                    if (result.success) {
                        alert(result.message);
                        // $("#postSection").load("/Post/Index?postId=" + postId + " #postSection");
                        window.location.reload();
                    } else {
                        alert(result.message);
                        window.location.href = '/Customer/Index';
                    }
                },
                error: function () {
                    alert("Đã xảy ra lỗi khi gửi yêu cầu.");
                }
            });
        }
    </script>

    
</div>