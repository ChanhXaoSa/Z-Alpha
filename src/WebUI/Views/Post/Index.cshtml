@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewBag.Title = "Post Detail";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@using ZAlpha.Application.Comment.Queries.GetComment;
@using ZAlpha.Application.Common.Models;
@using ZAlpha.Application.Post.Queries.GetAllPost;
@using ZAlpha.Application.Comment.Queries.GetAllComment;
@model PostModel;
@{
    PaginatedList<CommentModel> listComment = ViewBag.listComment;
}
<head>
    <link href="./assets/css/post-detail.css" rel="stylesheet" />
</head>

<div>


    <div class="box" style="min-height:600px;">
        <div class="row">
            <div class="col-6 box">
                <div>
                    <div style="position:relative ;">
                        <i id="bookmarkIcon" style="color: gray; position: absolute; top:10px; right:10px;" class="fa-solid fa-bookmark"></i>
                        <script>
                            const icon = document.getElementById('bookmarkIcon');
                            icon.addEventListener('click', function onClick() {
                                // Toggle the 'active' class on each click
                                icon.classList.toggle('active');

                                // If you want to specifically change the color
                                // based on the 'active' class, you can do the following:
                                const isActive = icon.classList.contains('active');
                                icon.style.color = isActive ? 'yellow' : 'gray';
                            });
                        </script>
                        <br />
                    </div>
                    @foreach (var postTag in Model.PostTags)
                    {
                        <div class="textbox">
                            @postTag.Tag.TagName
                        </div>
                    }

                </div>
                <div class="TiltePost">
                    <strong>
                        @Model.PostTitle
                    </strong>
                </div>
                <div class="row">
                    <div class="col-2">
                        <img style="width:3.7vw;border-radius: 9999px" src="https://via.placeholder.com/38x38" />
                    </div>
                    <div class="col-4">
                        <div style="color: black; font-size: 18px; font-family: Inter; font-weight: 500; word-wrap: break-word">
                            @{
                                string Name = null;
                            }
                            @foreach (var interactWithPosts in Model.InteractWithPosts)
                            {
                                if (interactWithPosts.InteractPostStatus == 0)
                                {
                                    Name = interactWithPosts.UserAccount.FirstName + " " + interactWithPosts.UserAccount.LastName;
                                    break;
                                }
                            }
                            @Name
                        </div>
                        <div style="color: #FF6C37; font-size: 13px; font-family: Inter; font-weight: 400; word-wrap: break-word">
                            @Model.Created
                        </div>
                    </div>
                    <div class="col-2"></div>
                    <div class="col-2">
                        <button class="button-2" style="height: 32px; width:5vw;" role="button"><i class="fa-solid fa-arrow-up"></i> Push</button>
                    </div>
                    <div class="col-2">
                        <button class="button-62" style="height: 32px; width:5vw;" role="button"><i class="fa-solid fa-arrow-down"></i> Hide</button>
                    </div>
                </div>

                <div class="ImgCenter">
                    <img class="" style="width: 33vw; border-radius: 10px;  justify-content:center;
                        align-content:center;
                        text-align:center;
                        margin:1rem;" 
                    src="@Model.PostImagesUrl" />
                </div>

                <div class="row">
                    <div class="PostText">
                        <div class="hashtag">
                            <p>#hashtag</p>
                            <p>#hashtagtest</p>
                        </div>
                        @Model.PostBody
                    </div>
                </div>


               
            </div>
            @*--------------Comment-----------*@
            <div class="col-6">
                <div class="boxComment">
                    <div id="scroll" style=" overflow:auto;  display:flex; justify-content:center;">                       
                        <div style="width:90%;">
                            @foreach (var item in listComment.Items)
                            {
                                @*---------Div Comment--------*@
                                <div style="row">                                    
                                    <div style="position:relative;">
                                        <img style="width:35px;border-radius:50%; margin: 0.5vw 0px 0.2vw 0; " src="https://via.placeholder.com/35x35" />
                                        <strong style="display:inline; font-size:12px;">@item.UserAccount.FirstName @item.UserAccount.LastName</strong>
                                        <div style="color: #FF6C37; font-size: 11px; display:inline; position:absolute; right:2vw; bottom:2px;">
                                            @item.Created
                                        </div>
                                    </div>
                                    <div class="DivComment">
                                        <div style="font-size:13px">
                                            @item.Description
                                        </div>
                                        <div class="button-comment">
                                            <div style="">
                                                <button type="button" class="btn rounded-circle" style="background-color:#75d995; color:white;">
                                                    <p style="font-size:9px; margin:0;">3 <i class="fa-solid fa-arrow-up fa-xs"></i></p> 
                                                </button>
                                                <button type="button" class="btn rounded-circle" style="background-color:#d97575; color:white;">
                                                    <p style="font-size:9px; margin:0;">9 <i class="fa-solid fa-arrow-down fa-xs"></i></p>                                                    
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }

                            


                            @*---------Div Comment--------*@
                            @* <div style="row">
                                <img style="width:35px;border-radius:50%; margin: 0.5vw 0px 0.2vw 0; " src="https://via.placeholder.com/35x35" />
                                <div class="DivComment">
                                    <div style="font-size:13px">
                                        Em chỉ đang cảm thấy mệt mỏi, quá tải và cần sẻ chia thôi. Anh luôn ở đây hỗ trợ em, bản chất em có những suy nghĩ trên đã là một điểm tích cực, là điều đáng quý. Hãy bắt đầu từ việc viết lại mục đích, lý do chọn lựa con đường của em, để lấy nó làm điểm tựa mỗi khi đối diện với cảm xúc khó chịu mà em đề cập. Còn nếu được hãy tham gia một buổi hẹn ngắn với anh nếu em vẫn cảm thấy struggle
                                    </div>
                                    <div class="button-comment">
                                        <div style="">
                                            <button type="button" class="btn btn-success rounded-circle"><i class="fa-solid fa-arrow-up"></i></button>
                                            <button type="button" class="btn btn-warning rounded-circle"><i class="fa-solid fa-arrow-down"></i></button>
                                        </div>
                                    </div>
                                </div>                           
                            </div> *@
                            
                        </div>                        
                    </div>
                    <form action="~/Post" method="post">
                        <div class="search">
                            <input type="hidden" name="PostId" value="@Model.Id" />
                            @* <input type="hidden" name="UserAccountId" value="424ab531-d60a-487e-9625-a74a7f5747be" /> *@
                            <input type="text" class="search__input" name="Description" placeholder="Type your text">
                            <button class="search__button" type="submit">
                                <i class="fa-solid fa-paper-plane fa-xl"></i>
                            </button>
                        </div>
                    </form>

                </div>

              

            </div>
        </div>        
    </div>




</div>